"use strict";var App=angular.module("fullsailsitinApp",["ngCookies","ngResource","ngSanitize","ngRoute","firebase"]);App.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.tpl",controller:"MainCtrl"}).when("/sitin",{templateUrl:"views/sitin.tpl",controller:"ClassCtrl"}).when("/dates/:acro",{templateUrl:"views/dates.tpl",controller:"DateCtrl"}).when("/attended",{templateUrl:"views/attended.tpl",controller:"DateCtrl"}).when("/404",{templateUrl:"views/404.tpl"}).otherwise({redirectTo:"404"})}]),App.run(["$firebaseSimpleLogin","$rootScope","$firebase",function(a,b,c){var d=new Firebase("https://sitin.firebaseio.com");b.loginObject=a(d),b.DIR="http://107.170.58.66/",b.modal={day:"",start:""},b.sitins=[],b.currentUser={},b.loginObject.$getCurrentUser().then(function(a){if(a){b.currentUser.name=a.displayName,b.currentUser.id=a.uid;var d=new Firebase("https://sitin.firebaseio.com/users/"+b.currentUser.id+"/attended");b.sitins=c(d)}}),b.classHash={WFP1:"Web Final Project 1",WIU:"Web Interface & Usability",RMO:"Rich Media Optimization",PWA1:"Programming Web Applications 1",WIA:"Web Interaction & Animation",MDD:"Mobile Device Deployment",PWA2:"Programming Web Applications 2",SSL:"Server Side Languages",DBS:"Database Structures",FWF:"Front End Web Frameworks"},b.emailHash={WFP1:"adam.gedney@gmail.com",WIU:"adam.gedney@gmail.com",RMO:"adam.gedney@gmail.com",PWA1:"adam.gedney@gmail.com",WIA:"adam.gedney@gmail.com",MDD:"adam.gedney@gmail.com",PWA2:"adam.gedney@gmail.com",SSL:"adam.gedney@gmail.com",DBS:"adam.gedney@gmail.com",FWF:"adam.gedney@gmail.com"}}]),App.filter("toArray",function(){return function(a){return a instanceof Object?Object.keys(a).filter(function(a){return"$"!==a.charAt(0)?a:void 0}).map(function(b){return Object.defineProperty(a[b],"$key",{value:b})}):a}}),App.filter("length",function(){return function(a){return a.length}}),App.filter("formatDateString",["$filter",function(a){return function(b){var c=new Date(b.replace(/-/g,"/"));return a("date")(c,"MMM-dd-yyyy @ h:mma")}}]),angular.module("fullsailsitinApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("fullsailsitinApp").controller("ClassCtrl",["$scope","$cookies","$rootScope","$http","$location","SendNotice",function(a,b,c,d,e,f){c.currentUser={},c.loginObject.$getCurrentUser().then(function(a){a?(c.currentUser.name=a.displayName,c.currentUser.avatar=a.avatar_url,c.currentUser.email=a.email,c.currentUser.id=a.uid):e.path("/")});var g=c.DIR+"/get-classes",h=[],i=[];a.classData={},d({method:"GET",url:g}).success(function(b){for(var d=0;d<b.length;d++)h.push(b[d].class),i.push(c.classHash[b[d].class]);a.classData.classAcronyms=h,a.classData.classNames=i}).error(function(a){console.log("get class names error",a)});var j=f;console.log(j)}]),angular.module("fullsailsitinApp").controller("DateCtrl",["$scope","$routeParams","$http","$rootScope","$cookies","$location","SendNotice",function(a,b,c,d,e,f,g){d.currentUser={},d.loginObject.$getCurrentUser().then(function(a){a?(d.currentUser.name=a.displayName,d.currentUser.avatar=a.avatar_url,d.currentUser.email=a.email,d.currentUser.id=a.uid):f.path("/")});var h=d.DIR+"/get-dates?data="+b.acro;d.classDetails={},c({method:"GET",url:h}).success(function(a){d.classDetails=a,d.classDetails.name=b.acro,d.classDetails.fullName=d.classHash[b.acro]}).error(function(a,b,c){console.log("get class names error",a,b,c)});var i=g;console.log(i)}]),angular.module("fullsailsitinApp").controller("loginCtrl",["$scope","$rootScope","$window","$location","$firebase",function(a,b,c,d,e){function f(){var a=e(new Firebase("https://sitin.firebaseio.com/users/"+b.currentUser.id));a.$on("loaded",function(c){console.log(c),null===c?(console.log("user doesnt already exist"),a.$set(b.currentUser)):console.log("user already exists")})}a.loginUser=function(){b.loginObject.$login("github").then(function(a){console.log(a),null!==a&&(d.path("/sitin"),b.currentUser={name:a.displayName,avatar:a.avatar_url,email:a.email,id:a.uid},f())},function(a){console.log(a,"user auth failed")})}}]),angular.module("fullsailsitinApp").controller("logoutCtrl",["$scope","$rootScope","$window","$location",function(a,b,c,d){a.logoutUser=function(){b.loginObject.$logout(),b.currentUser="",d.path("/")}}]),angular.module("fullsailsitinApp").factory("SendNotice",["$rootScope","$http",function(a,b){function c(){var b={classDate:a.modal.start,"class":a.modal.class,user:a.currentUser.name};a.sitins.$add(b)}a.cancel=function(){a.showModal=!1,a.showConfirmation=!1},a.sendNotice=function(){var d=a.emailHash[a.classDetails.name];a.showConfirmation=!0;var e=a.DIR+"/send-email?className="+a.classDetails.fullName+"&day="+a.modal.day+"&date="+a.modal.start+"&instructor="+a.modal.instructor+"&instEmail="+d+"&userEmail="+a.currentUser.email+"&userName="+a.currentUser.name;b({method:"GET",url:e}).success(function(b,d,e){console.log("email sent success",b,d,e),a.showConfirmation=!0,c()}).error(function(b,c){console.log("email send error",b,c),a.showFailure=!0})},a.getNext=function(c,d){console.log(c,d);var e=a.DIR+"/get-next?class="+c+"&date="+d;b({method:"GET",url:e}).success(function(b){a.modal={instructor:b[0].instructor,"class":c,day:b[0].day,start:b[0].start,again:"again"}}).error(function(a,b,c){console.log("get class names error",a,b,c)})}}]),angular.module("fullsailsitinApp").factory("FireConn",["$firebase",function(a){return function(b){var c="https://sitin.firebaseio.com/"+b,d=new Firebase(c);return a(d)}}]);