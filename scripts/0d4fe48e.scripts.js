"use strict";var App=angular.module("fullsailsitinApp",["ngCookies","ngResource","ngSanitize","ngRoute","firebase"]);App.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.tpl",controller:"MainCtrl"}).when("/sitin",{templateUrl:"views/sitin.tpl",controller:"ClassCtrl"}).when("/dates/:a",{templateUrl:"views/dates.tpl",controller:"DateCtrl"}).when("/attended",{templateUrl:"views/attended.tpl",controller:"DateCtrl"}).when("/404",{templateUrl:"views/404.tpl"}).otherwise({redirectTo:"404"})}]),App.run(["$firebaseSimpleLogin","$rootScope",function(a,b){var c=new Firebase("https://sitin.firebaseio.com");b.loginObject=a(c),b.classHash={WFP1:"Web Final Project 1",WIU:"Web Interface & Usability",RMO:"Rich Media Optimization",PWA1:"Programming Web Applications 1",WIA:"Web Interaction & Animation",MDD:"Mobile Device Deployment",PWA2:"Programming Web Applications 2",SSL:"Server Side Languages",DBS:"Database Structures",FWF:"Front End Web Frameworks"},b.emailHash={WFP1:"adam.gedney@gmail.com",WIU:"adam.gedney@gmail.com",RMO:"adam.gedney@gmail.com",PWA1:"adam.gedney@gmail.com",WIA:"adam.gedney@gmail.com",MDD:"adam.gedney@gmail.com",PWA2:"adam.gedney@gmail.com",SSL:"adam.gedney@gmail.com",DBS:"adam.gedney@gmail.com",FWF:"adam.gedney@gmail.com"}}]),angular.module("fullsailsitinApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("fullsailsitinApp").controller("ClassCtrl",["$scope","$cookies","$rootScope","$http","TotalSitins","MenuSlider",function(a,b,c,d,e,f){a.menu=f,void 0===c.currentUser&&(c.currentUser={name:b.name,avatar:b.avatar,email:b.email,sitins:b.sitins});var g=e;console.log(g);var h="http://127.0.0.1:8887/public/get-classes",i=[],j=[];a.classData={},d({method:"GET",url:h}).success(function(b){for(var d=0;d<b.length;d++)i.push(b[d].class),j.push(c.classHash[b[d].class]);a.classData.classAcronyms=i,a.classData.classNames=j}).error(function(a){console.log("get class names error",a)})}]),angular.module("fullsailsitinApp").controller("DateCtrl",["$scope","$routeParams","$http","$rootScope","$cookies","TotalSitins","MenuSlider",function(a,b,c,d,e,f,g){function h(){var b=new Firebase("https://sitin.firebaseio.com/attended/"),c={classDate:a.classDates.classDate[a.currentIndex],"class":a.classDates.name,user:d.currentUser.name};b.child(j()).set(c)}function i(a,b){var d="http://127.0.0.1:8887/public/get-dates?data="+a;c({method:"GET",url:d}).success(function(a){console.log(a,b)}).error(function(a,b,c){console.log("get class names error",a,b,c)})}function j(){var a=new Date,b=a.getDay(),c=a.getMonth()+1,d=a.getFullYear(),e=a.getHours(),f=a.getMinutes(),g=a.getMilliseconds(),h=b+" "+c+" "+d+" "+e+":"+f+":"+g;return h}a.menu=g,void 0===d.currentUser&&(d.currentUser={name:e.name,avatar:e.avatar,email:e.email,sitins:e.sitins}),a.showConfirmation=!0,a.cancelButton="Cancel",a.buttonWidth="";var k=b.a,l=f;console.log(l);var m="http://127.0.0.1:8887/public/get-dates?data="+k,n=[],o=[],p=[],q=[];a.classDates={},a.classDates.name=k,a.classDates.fullName=d.classHash[k],c({method:"GET",url:m}).success(function(b){for(var c=0;c<b.length;c++)n.push(b[c].day),o.push(b[c].date),p.push(b[c].start.substr(11)),q.push(b[c].instructor);a.classDates.classDay=n,a.classDates.classDate=o,a.classDates.classTime=p,a.instructors=q,a.classDates.len=b}).error(function(a,b,c){console.log("get class names error",a,b,c)}),a.confirm=function(b,c,d){console.log(b,c,d),a.showModal=!0,a.currentIndex=b,"next"===b&&i(c,d)},a.cancel=function(){a.showModal=!1,a.showConfirmation=!0,a.cancelButton="Cancel",a.buttonWidth=""},a.sendNotice=function(){var b=d.emailHash[a.classDates.name],e="http://127.0.0.1:8887/public/send-email?className="+a.classDates.fullName+"&day="+a.classDates.classDay[a.currentIndex]+"&date="+a.classDates.classDate[a.currentIndex]+"&time="+a.classDates.classTime[a.currentIndex]+"&instructor="+a.instructors[a.currentIndex]+"&instEmail="+b+"&userEmail="+d.currentUser.email+"&userName="+d.currentUser.name;c({method:"GET",url:e}).success(function(b,c,d){console.log("email sent success",b,c,d),a.showConfirmation=!1,a.cancelButton="Close Window",a.buttonWidth="cancel-btn-wide",h()}).error(function(a,b,c){console.log("email send error",a,b,c)})}}]),angular.module("fullsailsitinApp").controller("loginCtrl",["$scope","$rootScope","$window","$cookies",function(a,b,c,d){function e(){var a=new Firebase("https://sitin.firebaseio.com/users/"),c=[],d=!0;a.on("child_added",function(a){c.push(a.val())});for(var e=0;e<c.length;e++)d=c[e].name===b.currentUser.name?!0:!1;d||a.child(b.currentUser.name).set(b.currentUser),f()}function f(){d.name=b.currentUser.name,d.avatar=b.currentUser.avatar,d.email=b.currentUser.email}function g(){var a,b=new Date,c=b.getDay(),d=b.getMonth()+1,e=b.getFullYear(),f=b.getHours(),g=b.getMinutes();return f>=13&&(f-=12,a=f+":"+g,a+="pm"),d+"/"+c+"/"+e+" "+a}a.loginUser=function(){b.loginObject.$login("github").then(function(a){console.log(a),null!==a&&(c.location.href="#/sitin",b.currentUser={name:a.displayName,avatar:a.avatar_url,email:a.email,added:g()},e())},function(a){console.log(a,"user auth failed")})}}]),angular.module("fullsailsitinApp").controller("logoutCtrl",["$scope","$rootScope","$window","$cookies",function(a,b,c,d){a.logoutUser=function(){function a(){d.name="",d.avatar="",d.email="",d.sitins=""}b.loginObject.$logout(),b.currentUser="",a(),c.location.href="#/"}}]),angular.module("fullsailsitinApp").controller("MenuCtrl",["$scope",function(a){function b(){a.menu.slideoutSwitch=!1}var c=!1;a.menu={},a.slideout=function(){c?(a.menu.animate.fx="fadeOutRightBig",setTimeout(b,1e3),c=!1):(a.menu.animate.fx="fadeInRightBig",a.menu.slideoutSwitch=!0,c=!0)}}]),angular.module("fullsailsitinApp").factory("TotalSitins",["$rootScope","$cookies",function(a,b){var c={};c.attendedArray=[];var d=new Firebase("https://sitin.firebaseio.com/attended/"),e=b.name;return d.on("child_added",function(d){d.val().user===e&&(c.attendedArray.push(d.val()),a.currentUser.sitins=c.attendedArray.length,b.sitins=c.attendedArray.length,a.sitins=c.attendedArray)}),c}]),angular.module("fullsailsitinApp").factory("MenuSlider",[function(){function a(){c.slideoutSwitch=!1}var b=!1,c={};return c.slideout=function(){b?(c.animate="fadeOutRightBig",setTimeout(a,1e3),b=!1):(c.animate="fadeInRightBig",c.slideoutSwitch=!0,b=!0)},c}]),angular.module("fullsailsitinApp").factory("FireConn",["$firebase",function(a){var b="https://sitin.firebaseio.com/attended/",c=new Firebase(b);return a(c)}]);